"""
URL Whitelist Configuration for Municipal DPW Knowledge Capture System
Contains approved authoritative sources for compliance and regulatory information
All URLs include child pages by default
"""

WHITELISTED_URLS = {
    "https://azdot.gov/business/engineering-standards": {"include_children": True},
    "https://bels.alabama.gov": {"include_children": True},
    "https://boards.bsd.dli.mt.gov/pel": {"include_children": True},
    "https://btr.az.gov/licensing/professional-engineering": {"include_children": True},
    "https://cca.hawaii.gov/pvl/boards/engineer/": {"include_children": True},
    "https://codesonline.nfpa.org": {"include_children": True},
    "https://dcra.dc.gov/service/professional-engineers": {"include_children": True},
    "https://deldot.gov/Programs/DRC/": {"include_children": True},
    "https://dllr.maryland.gov/license/pe/": {"include_children": True},
    "https://dlr.sd.gov/bdotm/engineeringsurveying/": {"include_children": True},
    "https://dopl.utah.gov/eng/": {"include_children": True},
    "https://dot.alaska.gov/stwddes/dcsstandards.shtml": {"include_children": True},
    "https://dot.nebraska.gov/business-center/design-consultant/design-manuals/": {"include_children": True},
    "https://dot.sd.gov/doing-business/engineering": {"include_children": True},
    "https://dpo.colorado.gov/Engineers": {"include_children": True},
    "https://dpr.delaware.gov/boards/professionalengineers/": {"include_children": True},
    "https://dpw.dc.gov/": {"include_children": True},
    "https://dsps.wi.gov/Pages/Professions/Engineer/Default.aspx": {"include_children": True},
    "https://engineer-lsla.wyoming.gov/": {"include_children": True},
    "https://engineers.nebraska.gov/": {"include_children": True},
    "https://fbpe.org/": {"include_children": True},
    "https://fortress.wa.gov/dol/dolprod/bpdlicensing/": {"include_children": True},
    "https://global.iccsafe.org/international-codes-and-standards/": {"include_children": True},
    "https://health.ri.gov/licenses/detail.php?id=250": {"include_children": True},
    "https://hidot.hawaii.gov/highways/home/standards-and-specifications/": {"include_children": True},
    "https://highways.dot.gov/fed-aid-essentials/videos/project-development/design-project-geometric-design-requirements": {"include_children": True},
    "https://highways.dot.gov/federal-lands/specs": {"include_children": True},
    "https://idot.illinois.gov/doing-business/procurements/engineering-architectural-professional-services/index.html": {"include_children": True},
    "https://iowadot.gov/design/dmanual": {"include_children": True},
    "https://ipels.idaho.gov/": {"include_children": True},
    "https://itd.idaho.gov/highway-construction-standards/": {"include_children": True},
    "https://kyboels.ky.gov/": {"include_children": True},
    "https://lapels.com/": {"include_children": True},
    "https://llr.sc.gov/pel/": {"include_children": True},
    "https://mn.gov/boards/engineering/": {"include_children": True},
    "https://nv.gov/BOE/": {"include_children": True},
    "https://peboards.wv.gov/": {"include_children": True},
    "https://pels.texas.gov/": {"include_children": True},
    "https://peps.ohio.gov/": {"include_children": True},
    "https://plb.iowa.gov/board/engineering-and-land-surveying": {"include_children": True},
    "https://portal.ct.gov/DCP/License-Services-Division/PE-Home-Page/Professional-Engineer-PE": {"include_children": True},
    "https://portal.ct.gov/DOT/Engineering": {"include_children": True},
    "https://pr.mo.gov/engineers-architects-land-surveyors.asp": {"include_children": True},
    "https://sos.ga.gov/page/engineers-land-surveyors": {"include_children": True},
    "https://sos.vermont.gov/engineers-land-surveyors/": {"include_children": True},
    "https://store.astm.org/products-services/standards-and-publications/standards/construction-standards.html": {"include_children": True},
    "https://transportation.ky.gov/Highway-Design/Pages/Design-Guidance.aspx": {"include_children": True},
    "https://transportation.wv.gov/highways/engineering/Pages/default.aspx": {"include_children": True},
    "https://vtrans.vermont.gov/highway-construction": {"include_children": True},
    "https://wisconsindot.gov/Pages/doing-bus/eng-consultants/cnslt-rsrces/design/default.aspx": {"include_children": True},
    "https://wsdot.wa.gov/engineering-standards/design-topics-manuals": {"include_children": True},
    "https://www.acquisition.gov/far/part-36": {"include_children": True},
    "https://www.acquisition.gov/far/subpart-36.6": {"include_children": True},
    "https://www.ansi.org": {"include_children": True},
    "https://www.apwa.org/resources/about-public-works/": {"include_children": True},
    "https://www.arkansas.gov/pels/": {"include_children": True},
    "https://www.arkansashighways.com/standard_specifications.aspx": {"include_children": True},
    "https://www.asce.org/publications-and-news/codes-and-standards": {"include_children": True},
    "https://www.asme.org/codes-standards": {"include_children": True},
    "https://www.astm.org": {"include_children": True},
    "https://www.bpelsg.ca.gov/": {"include_children": True},
    "https://www.cem.va.gov/pdf/fedreqs.pdf": {"include_children": True},
    "https://www.codot.gov/business/designsupport/cdot-construction-specifications": {"include_children": True},
    "https://www.commerce.alaska.gov/web/cbpl/ProfessionalLicensing/BoardofArchitectsEngineersandLandSurveyors.aspx": {"include_children": True},
    "https://www.congress.gov/crs-product/R47666": {"include_children": True},
    "https://www.dir.ca.gov/public-works/publicworks.html": {"include_children": True},
    "https://www.dos.pa.gov/ProfessionalLicensing/BoardsCommissions/Engineers/Pages/default.aspx": {"include_children": True},
    "https://www.dot.ga.gov/PartnerSmart/DesignManuals/Specifications": {"include_children": True},
    "https://www.dot.nd.gov/divisions/design/": {"include_children": True},
    "https://www.dot.nm.gov/engineering/": {"include_children": True},
    "https://www.dot.nv.gov/doing-business/design-engineering": {"include_children": True},
    "https://www.dot.ny.gov/divisions/engineering": {"include_children": True},
    "https://www.dot.ri.gov/engineering/": {"include_children": True},
    "https://www.dot.state.al.us/publications/Maintenance/pdf/Permits/PermitManual.pdf": {"include_children": True},
    "https://www.dot.state.mn.us/bridge/manuals.html": {"include_children": True},
    "https://www.dot.state.wy.us/home/engineering_technical_programs/engineering_programs.html": {"include_children": True},
    "https://www.dotd.la.gov/engineering/standards/": {"include_children": True},
    "https://www.dpor.virginia.gov/boards/professional-engineers": {"include_children": True},
    "https://www.epa.gov/eg/construction-and-development-effluent-guidelines": {"include_children": True},
    "https://www.epa.gov/laws-regulations": {"include_children": True},
    "https://www.epa.gov/sites/default/files/2015-10/documents/myerguide.pdf": {"include_children": True},
    "https://www.fdot.gov/programmanagement/implemented/specbooks/default.shtm": {"include_children": True},
    "https://www.fhwa.dot.gov/programadmin/121205.cfm": {"include_children": True},
    "https://www.gsa.gov/real-estate/design-and-construction/facilities-standards-for-the-public-buildings-service": {"include_children": True},
    "https://www.idfpr.com/profs/ProfEng.asp": {"include_children": True},
    "https://www.in.gov/indot/construction/design-standards/": {"include_children": True},
    "https://www.in.gov/pla/professions/professional-engineers/": {"include_children": True},
    "https://www.kansas.gov/engineers/": {"include_children": True},
    "https://www.ksdot.org/bureaus/burConsMain/SpecProv/specprov.asp": {"include_children": True},
    "https://www.maine.gov/mdot/engineering/": {"include_children": True},
    "https://www.maine.gov/professionalengineers/": {"include_children": True},
    "https://www.mass.gov/orgs/board-of-registration-of-professional-engineers-and-land-surveyors": {"include_children": True},
    "https://www.mass.gov/orgs/highway-division": {"include_children": True},
    "https://www.mdot.ms.gov/portal/home/engineering": {"include_children": True},
    "https://www.mdt.mt.gov/publications/manuals.shtml": {"include_children": True},
    "https://www.michigan.gov/lara/bureau-list/bpl/occ/prof/engineers": {"include_children": True},
    "https://www.michigan.gov/mdot/design/standards": {"include_children": True},
    "https://www.modot.org/engineering-policy-guide": {"include_children": True},
    "https://www.ncbels.org/": {"include_children": True},
    "https://www.ncdot.gov/engineering/": {"include_children": True},
    "https://www.ndpelsboard.org/": {"include_children": True},
    "https://www.nfpa.org/codes-and-standards": {"include_children": True},
    "https://www.nh.gov/dot/programs/projectdevelopment/": {"include_children": True},
    "https://www.nist.gov": {"include_children": True},
    "https://www.nj.gov/transportation/eng/": {"include_children": True},
    "https://www.njconsumeraffairs.gov/pels/": {"include_children": True},
    "https://www.odot.org/roadway/": {"include_children": True},
    "https://www.ok.gov/pels/": {"include_children": True},
    "https://www.op.nysed.gov/professions/engineering": {"include_children": True},
    "https://www.oplc.nh.gov/board-professional-engineers": {"include_children": True},
    "https://www.oregon.gov/odot/Engineering/Pages/Standards.aspx": {"include_children": True},
    "https://www.oregon.gov/osbeels/": {"include_children": True},
    "https://www.osha.gov/construction": {"include_children": True},
    "https://www.osha.gov/laws-regs/regulations/standardnumber/1926": {"include_children": True},
    "https://www.penndot.pa.gov/ProjectAndPrograms/Design/Pages/default.aspx": {"include_children": True},
    "https://www.pepls.ms.gov/": {"include_children": True},
    "https://www.rld.nm.gov/boards-and-commissions/individual-boards-and-commissions/professional-engineers-and-professional-surveyors/": {"include_children": True},
    "https://www.roads.maryland.gov/ohd2/": {"include_children": True},
    "https://www.scdot.org/business/engineering.aspx": {"include_children": True},
    "https://www.tn.gov/commerce/regboards/aeel.html": {"include_children": True},
    "https://www.tn.gov/tdot/roadway-design.html": {"include_children": True},
    "https://www.transportation.gov/roadways-and-bridges": {"include_children": True},
    "https://www.transportation.ohio.gov/working/engineering": {"include_children": True},
    "https://www.txdot.gov/inside-txdot/division/design.html": {"include_children": True},
    "https://www.udot.utah.gov/main/f?p=100:pg:0:::1:T,V:1435": {"include_children": True},
    "https://www.virginiadot.org/business/design-manual.asp": {"include_children": True},
}

def is_url_whitelisted(url):
    """
    Check if a URL is in the whitelist

    Args:
        url (str): The URL to check

    Returns:
        bool: True if URL is whitelisted (including child pages), False otherwise
    """
    if not url:
        return False

    # Normalize URL
    url = url.strip().rstrip('/')

    # Check exact match first
    if url in WHITELISTED_URLS:
        return True

    # Check if URL is a child of any whitelisted parent
    for parent_url, config in WHITELISTED_URLS.items():
        if config.get("include_children", False):
            parent_normalized = parent_url.rstrip('/')
            if url.startswith(parent_normalized):
                return True

    return False

def get_whitelisted_domains():
    """
    Extract unique domains from whitelisted URLs

    Returns:
        set: Set of whitelisted domains
    """
    domains = set()
    for url in WHITELISTED_URLS.keys():
        # Extract domain from URL
        if url.startswith('http://') or url.startswith('https://'):
            domain = url.split('/')[2]
            domains.add(domain)
    return domains

def get_urls_by_category(category_keyword):
    """
    Get whitelisted URLs that match a category keyword

    Args:
        category_keyword (str): Keyword to search for in URL

    Returns:
        list: List of matching URLs
    """
    matching_urls = []
    keyword_lower = category_keyword.lower()
    for url in WHITELISTED_URLS.keys():
        if keyword_lower in url.lower():
            matching_urls.append(url)
    return matching_urls

def get_total_whitelisted_urls():
    """
    Get total count of whitelisted URLs

    Returns:
        int: Number of whitelisted URLs
    """
    return len(WHITELISTED_URLS)
